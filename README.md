# Mодуль импорта курсов валют для 1С-Битрикс + компонент вывода курса конкретной валюты.

### Установка модуля

Необходимо скопировать модуль в папку `/local/modules/` вашей установки 1С-Битрикс. 

Далее в зоне Администрирования в разделе `Маркетплейс -> Установленные решения` произвести установку стандартным образом.

### Описание модуля

Импорт курсов осуществляется с помощью агента, который предоставляется модулем:

`\Dev\CurrencyWidget\Currency::getCurrency('USD');`

Агент импортирует актуальные курсы валют с сайта http://www.cbr.ru/ и записывает в папку кеша результат в файл с кодом валюты.
Формат записи - json.

`/bitrix/cache/dev.currencywidget/KZT.php`

Компонент вывода курса всегда берет данные только из кеша. Если данных нет, то компонент ничего не выводит(проверка идет в шаблоне, так что это можно изменить).

Если файл кеша для заданной в настройках компонента валюты не был найден, то автоматически создается агент для импорта заданной валюты, т.е. вручную прописывать агенты не нужно.

Пример вызова компонента:

`<?$APPLICATION->IncludeComponent("dev.currency.widget",".default",Array("CHAR_CODE" => "KZT"));?>`